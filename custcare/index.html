<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="stylesheets/custcare.css" />
<script src="javascripts/jquery-2.2.3.min.js"></script>
<title>Order fix receipt</title>
</head>

<body>
<textarea id="input"></textarea>
<div>&nbsp;</div>
<div><div id="output"></div></div>
<div>&nbsp;</div>

<script type="text/javascript">
$('#input').bind('input propertychange', function() {
	$("#output").empty();
	var total = 0;

	var lines = $("#input").val().split("\n");
	var data = [];

	var txt = "";
	for (var i = 0; i < lines.length; i++) {
		if ($.trim(lines[i]) != "") {
			var tokens = lines[i].split("\t");
			data.push(tokens);
		}
	}
	$("#output").append(
		$("<div/>")
			.attr("class", "r-header")
			.html("Diamonds Compensation Details")
	);
	for (var i = 0; i < data.length; i++) {
		var order = $("<div/>").attr("class", "r-order");
		var packName = data[i][6] + " diamonds";
		var diamonds = parseInt(data[i][6]);
		var sum = 0;
		switch (diamonds) {
			case 6:
				packName = "Small Diamond Pack";
				break;
			case 31:
				packName = "Medium Diamond Pack";
				break;
			case 138:
				packName = "Large Diamond Pack";
				break;
			case 368:
				packName = "Super Diamond Pack";
				break;
			case 768:
				packName = "Luxury Diamond Pack";
				break;
		}
		order.append(
			$("<div/>")
				.attr("class", "ro-title")
				.html("Order Number")
		).append(
			$("<div/>")
				.attr("class", "ro-content")
				.html(data[i][1])
		).append(
			$("<div/>")
				.attr("class", "ro-title")
				.html("Order Date ("+data[i][4]+" Time)")
		).append(
			$("<div/>")
				.attr("class", "ro-content")
				.html(data[i][5])
		).append(
			$("<div/>")
				.attr("class", "ro-title")
				.html("Purchased Item")
		).append(
			$("<div/>")
				.attr("class", "ro-content")
				.html(packName)
		).append(
			$("<div/>").attr("class", "ro-item").append(
				$("<div/>")
					.attr("class", "roi-type")
					.html("Diamond Pack")
			).append(
				$("<div/>")
					.attr("class", "roi-number")
					.html(data[i][6])
			)
		);
		sum += diamonds;
		var bonus = parseInt(data[i][3]) * diamonds;
		if (bonus > 0) {
			sum += bonus;
			order.append(
				$("<div/>").attr("class", "ro-item").append(
					$("<div/>")
						.attr("class", "roi-type")
						.html("Promotion Bonus")
				).append(
					$("<div/>")
						.attr("class", "roi-number")
						.html(bonus)
				)
			);
		}
		var bonus = parseInt(data[i][2]) * diamonds;
		if (bonus > 0) {
			sum += bonus;
			order.append(
				$("<div/>").attr("class", "ro-item").append(
					$("<div/>")
						.attr("class", "roi-type")
						.html("Custom Service Delay Bonus")
				).append(
					$("<div/>")
						.attr("class", "roi-number")
						.html(bonus)
				)
			);
		}
		// order.append(
		// 	$("<div/>").attr("class", "ro-item").append(
		// 		$("<div/>")
		// 			.attr("class", "roi-type roi-sum")
		// 			.html("Sum")
		// 	).append(
		// 		$("<div/>")
		// 			.attr("class", "roi-number roi-sum")
		// 			.html(sum)
		// 	)
		// );
		$("#output").append($("<div/>").append(order));
		total += sum;
	}
	$("#output").append(
		$("<div/>").attr("class", "r-total").append(
			$("<div/>")
				.attr("class", "rt-label")
				.html("Total Diamonds: ")
		).append(
			$("<div/>")
				.attr("class", "rt-sum")
				.html(total)
		)
	);
});
</script>

</body>
</html>